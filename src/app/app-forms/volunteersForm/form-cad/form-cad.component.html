<div class="container mt-5 mb-5">
  <div [@torrada]="alertState" class="alert">
    <div [ngClass]="typeStyle()" class="borderAlert"></div>
    <p id="text"></p>
    <button (click)="toggle('hide')" class="closebtn">x</button>
  </div>

  <h1 *ngIf="!Voluntary._id">Novo Cadastro</h1>
  <h1 *ngIf="Voluntary._id">Editar Cadastro</h1>
  <form [formGroup]="formulario" (ngSubmit)="onSubmit()">
    <hr />

    <fieldset class="form-group">
      <h4 class="mb-4 ml-4">Voluntário</h4>
      <div class="row d-flex-wrap m-3 mb-4">
        <div class="col form-floating">
          <input
            [ngClass]="aplicaCss('nome')"
            type="text"
            id="inputName"
            class="form-control"
            formControlName="nome"
            placeholder="Informe Seu nome completo:"
          />
          <label class="ml-5" for="inputName">Nome Completo</label>
          <small
            *ngIf="
              this.formulario.controls.nome.invalid &&
              this.formulario.controls.nome.touched
            "
            class="text-formInvalid"
          >
            Este campo precisa ter pelo menos 3 caracteres...
          </small>
        </div>
        <div class="form-floating col">
          <input
            [ngClass]="aplicaCss('dataNascimento')"
            type="date"
            id="inputLastname"
            formControlName="dataNascimento"
            class="form-control"
          />
          <label class="ml-3 ml-2" for="inputLastname">Nascimento</label>
          <small
            *ngIf="
              this.formulario.controls.dataNascimento.invalid &&
              this.formulario.controls.dataNascimento.touched
            "
            class="text-formInvalid"
          >
            insira sua data de Nascimento!
          </small>
        </div>
        <div class="col-auto radioSexo">
          <div
            class="custom-control custom-radio"
            [ngClass]="aplicaCss('sexo')"
          >
            <input
              class="form-check-input mr-2"
              type="radio"
              formControlName="sexo"
              name="sexo"
              id="masculino"
              value="M"
            />
            <label class="" class="form-check-label" for="masculino">
              Masculino
            </label>
          </div>
          <div class="custom-control custom-radio">
            <input
              class="form-check-input mr-2"
              type="radio"
              formControlName="sexo"
              name="sexo"
              id="feminino"
              value="F"
            />
            <label class="" class="form-check-label" for="feminino">
              Feminino
            </label>
          </div>
          <small
            *ngIf="
              this.formulario.controls.sexo.invalid &&
              this.formulario.controls.sexo.touched
            "
            class="text-formInvalid fieldInvalidSexo col-sm-3"
          >
            Selecione um dos ítens
          </small>
        </div>
      </div>
      <div >
        <div class="row m-3 mb-4">
          <div class="form-floating campo form-group col">
            <input
              type="text"
              class="form-control"
              id="rua"
              formControlName="rua"
              placeholder="Informe o nome da sua rua"
            />
            <label class="ml-3" class="ml-3" for="rua">Rua</label>
          </div>
          <div class="form-floating campo form-group col">
            <input
              type="number"
              class="form-control"
              id="inputNumberC"
              formControlName="numero"
              placeholder="nº"
            />
            <label class="ml-3" class="ml-3" for="inputNumberC">Número</label>
          </div>
          <div class="form-floating campo form-group col">
            <input
              type="text"
              class="form-control"
              formControlName="bairro"
              id="inputBairro"
              placeholder="Informe seu Bairro:"
            />
            <label class="ml-3" class="ml-3" for="inputBairro">Bairro</label>
          </div>
        </div>

        <div class="row m-3 mb-4">
          <div class="form-floating campo form-group col">
            <input
              type="text"
              class="form-control"
              id="inputCity"
              formControlName="cidade"
              placeholder="Informe sua cidade:"
            />
            <label class="ml-3" class="ml-3" for="inputCity">Cidade</label>
          </div>
          <div class="campo form-floating form-group col">
            <input
              type="text"
              class="form-control"
              id="inputComple"
              formControlName="complemento"
              placeholder="Casa / Apt"
            />
            <label class="ml-3" for="inputComple">Complemento</label>
          </div>
          <div class="campo form-floating form-group col">
            <select formControlName="uf" id="inputEstado" class="form-control">
              <option selected value="null">Escolha Estado...</option>
              <option value="AC">Acre</option>
              <option value="AL">Alagoas</option>
              <option value="AP">Amapá</option>
              <option value="AM">Amazonas</option>
              <option value="BA">Bahia</option>
              <option value="CE">Ceará</option>
              <option value="DF">Distrito Federal</option>
              <option value="ES">Espírito Santo</option>
              <option value="GO">Goiás</option>
              <option value="MA">Maranhão</option>
              <option value="MT">Mato Grosso</option>
              <option value="MS">Mato Grosso do Sul</option>
              <option value="MG">Minas Gerais</option>
              <option value="PA">Pará</option>
              <option value="PB">Paraíba</option>
              <option value="PR">Paraná</option>
              <option value="PE">Pernambuco</option>
              <option value="PI">Piauí</option>
              <option value="RJ">Rio de Janeiro</option>
              <option value="RN">Rio Grande do Norte</option>
              <option value="RS">Rio Grande do Sul</option>
              <option value="RO">Rondônia</option>
              <option value="RR">Roraima</option>
              <option value="SC">Santa Catarina</option>
              <option value="SP">São Paulo</option>
              <option value="SE">Sergipe</option>
              <option value="TO">Tocantins</option>
            </select>
            <label class="ml-3" for="inputEstado">Estado</label>
          </div>
          <div class="form-floating form-group col">
            <input
              type="cep"
              class="form-control"
              formControlName="CEP"
              id="inputCEP"
              placeholder="Informe seu CEP"
              mask="00000-000"
            />
            <label class="ml-3" for="inputCEP">CEP</label>
          </div>
        </div>
      </div>
      <div class="row m-3 mb-4">
        <div class="form-floating form-group col">
          <input
            [ngClass]="aplicaCss('profissao')"
            formControlName="profissao"
            type="text"
            class="form-control"
            id="inputProf"
            placeholder="Informe sua profissão"
          />
          <label class="ml-3" for="inputProf">Profissão</label>
          <small
            *ngIf="
              this.formulario.controls.profissao.invalid &&
              this.formulario.controls.profissao.touched
            "
            class="text-formInvalid"
          >
            Não esqueça de colocar sua profissão, isso é importante!
          </small>
        </div>

        <div class="form-floating form-group col">
          <input
            [ngClass]="aplicaCss('telefone')"
            formControlName="telefone"
            type="tel"
            class="form-control"
            prefix="+55"
            mask=" (00) 00000-0000"
            id="inputTel"
            placeholder="Informe telefone para Contato"
          />
          <label class="ml-3" for="inputTel">Telefone Celular</label>
          <small
            *ngIf="
              this.formulario.controls.telefone.invalid &&
              this.formulario.controls.telefone.touched
            "
            class="text-formInvalid"
          >
            Não esqueça de informar o seu telefone celular!
          </small>
        </div>
        <div class="form-floating form-group col">
          <input
            formControlName="telefoneFx"
            prefix="+55"
            mask=" (00) 0000-0000"
            type="tel"
            class="form-control"
            id="inputTelFx"
            placeholder="Informe telefone para Contato"
          />
          <label class="ml-3" for="inputTelFx">Telefone fixo</label>
        </div>
      </div>

      <div class="row m-3 mb-4">
        <div class="form-floating form-group col">
          <select class="form-control" id="inputEstadoCivil" formControlName="EstadoCivil">
            <option value="null">Selecione</option>
            <option value="Solteiro">Solteiro</option>
            <option value="Casado">Casado</option>
            <option value="Divorciado">Divorciado</option>
            <option value="Viúvo">Viúvo</option>
          </select>
          <label class="ml-3" for="inputEstadoCivil">Estado Civil</label>
        </div>

        <div class="col imgFilePrincipal">
          <input
            type="file"
            [ngClass]="aplicaCss('imgFilePrincipal')"
            name="imgFilePrincipal"
            (change)="onFileSelect($event, 'imgFilePrincipal')"
          />
          <small
          *ngIf="hasArchive !=null && hasArchive && formulario.controls.imgFilePrincipal.invalid"
            class="text-formInvalid ml-1"
          >
            O ítem selecionado não é uma imagem, verifique e tente novamente.
          </small>
        </div>
      </div>
      
      <hr />
      <div class="row m-3 mb-4">
        <div class="form-group form-floating col">
          <input
            [ngClass]="aplicaCss('email')"
            formControlName="email"
            type="email"
            class="form-control"
            id="inputEmail"
            placeholder="Informe seu E-mail"
          />
          <label class="ml-3" for="inputEmail">E-mail</label>
          <small
            *ngIf="
              this.formulario.controls.email.invalid &&
              this.formulario.controls.email.touched
            "
            class="text-formInvalid"
          >
            Este campo não pode ficar vazio! Não se esqueça, o email tem que ser
            válido!
          </small>
        </div>

        <div class="form-group form-floating col-3" *ngIf="!this.Voluntary._id">
     
          <input
          [ngClass]="aplicaCss('password')"
            formControlName="password"
            type="password"
            class="form-control"
            id="imputPassword"
            placeholder="Informe sua senha"
    
          />
          <label class="ml-3" for="imputPassword">Senha</label>
          <small
            *ngIf=" this.formulario.controls.password.invalid &&
            (this.formulario.controls.password.touched ||
            this.formulario.controls.password.dirty),"
            class="text-formInvalid"
          >
            Insira sua senha com pelo menos 8 digitos
          </small>
        </div>
        <div class="form-group form-floating col-3" *ngIf="!this.Voluntary._id">
          <input
          formControlName="password2"
          [ngClass]="aplicaCss('password2')"
        
            type="password"
            class="form-control"
            id="inputPassword2"
            placeholder="Informe sua senha"
          (input)="password2Comparator($event)"
          />
          <label class="ml-3" for="inputPassword2">Confirme a senha</label>
          <small
            *ngIf="!this.samePassword && this.formulario.controls.password2.dirty"
            class="text-formInvalid"
          >
            As senhas estão diferentes, revise
          </small>
        </div>
      </div>

      <hr />
      <div class="row m-3 mb-4">
        <div class="form-floating col">
          <input
            [ngClass]="aplicaCss('nomeIg')"
            formControlName="nomeIg"
            type="text"
            id="inputNameIg"
            class="form-control"
            placeholder="Informe o nome da sua Igreja:"
          />
          <label class="ml-3" for="inputNameIg">Nome da Igreja</label>
          <small
            *ngIf="
              this.formulario.controls.nomeIg.invalid &&
              this.formulario.controls.nomeIg.touched
            "
            class="text-formInvalid"
          >
            Precisamos saber qual a sua igreja!
          </small>
        </div>
        <div class="form-floating col">
          <input
            type="text"
            formControlName="pastor"
            id="inputNamePr"
            class="form-control"
            placeholder="Informe o nome do seu Pastor"
            [ngClass]="aplicaCss('pastor')"
          />
          <label class="ml-3" for="inputNamePr">Nome do Pastor</label>
          <small
            *ngIf="
              this.formulario.controls.nomeIg.invalid &&
              this.formulario.controls.nomeIg.touched
            "
            class="text-formInvalid"
          >
            Não esqueça de informar o nome do seu Pastor!
          </small>
        </div>
      </div>
    </fieldset>

    <hr />

    <fieldset
      class="d-flex flex-column"
      [ngClass]="{
        'is-validRadios': brandRadiosValidator == true,
        'is-invalidRadios': brandRadiosValidator == false
      }"
    >
      <h4 class="mb-4 ml-4">Desejo participar da Rede de Apoio:</h4>

      <div class="form-check form-switch">
        <input
          class="form-check-input px-3 py-2"
          type="checkbox"
          id="chekbox1"
          formControlName="chekbox1Profissao"
          (click)="setRadios($event, 'chekbox1Profissao')"
          (change)="brandRadios()"
        />
        <label class="form-check-label" for="chekbox1">
          Atuando voluntáriamente com minha profisão.
        </label>
      </div>

      <div class="form-check form-switch">
        <input
          class="form-check-input px-3 py-2"
          type="checkbox"
          id="chekbox2"
          formControlName="chekbox2Intercessor"
          (change)="brandRadios()"
          (click)="setRadios($event, 'chekbox2Intercessor')"
        />
        <label class="form-check-label" for="chekbox2">
          Atuando voluntáriamente como um intercessor.</label
        >
      </div>

      <div class="form-check form-switch">
        <input
          class="form-check-input px-3 py-2"
          type="checkbox"
          id="chekbox3"
          formControlName="chekbox3Cuidador"
          (change)="brandRadios()"
          (click)="setRadios($event, 'chekbox3Cuidador')"
        />
        <label class="form-check-label" for="chekbox3">
          Atuando voluntáriamente como Pastor Cuidador (conselheiro).</label
        >
      </div>

      <div class="form-check form-switch">
        <input
          class="form-check-input px-3 py-2"
          type="checkbox"
          id="chekbox4"
          formControlName="chekbox4CasaDescanso"
          (click)="setRadios($event, 'chekbox4CasaDescanso')"
          (change)="brandRadios()"
        />
        <label class="form-check-label" for="chekbox4"
          >Disponibilizando como parceria minha prorpiedade como Local de
          Descanso.
        </label>
        <small *ngIf="brandRadiosValidator === false" class="text-formInvalid">
          é necessário escolher pelo menos um das opções!
        </small>
      </div>
    </fieldset>
    <fieldset
      class="mt-2 fieldsetIF pb-4"
      *ngIf="formulario.value.chekbox1Profissao"
    >
      <h5 class="mb-4 ml-4">
        Para quem deseja atuar através da sua Profissão:
      </h5>

      <div class="ml-4">
        <div class="form-floating mb-3 col-md">
          <input
            type="text"
            class="form-control"
            id="especialidade"
            placeholder="Qual a especialidade?"
            formControlName="especialidade"
          />
          <label for="floatingInput">Qual a especialidade?</label>
        </div>

        <div class="form-floating mb-3 col-md">
          <input
            type="text"
            class="form-control"
            id="servicoOferecido"
            placeholder="o que pode oferecer aos missionários?"
            formControlName="servicoOferecido"
          />
          <label for="floatingInput"
            >O que pode oferecer aos missionários?</label
          >
        </div>
      </div>
    </fieldset>

    <fieldset
      class="mt-2 fieldsetIF pb-5"
      *ngIf="formulario.value.chekbox3Cuidador"
    >
      <h5 class="mb-4 ml-4">Somente para Cuidadores:</h5>

      <div class="form-check form-switch mb-4">
        <input
          class="form-check-input px-3 py-2"
          type="checkbox"
          id="chekbox5"
          formControlName="chekbox5Aconselhamento"
        />
        <label class="form-check-label" for="chekbox5"
          >Possui Curso de
          <b style="color: green; margin-left: 5px; margin-right: 5px"
            >Aconselhamento Biblico
          </b>
          ?</label
        >
      </div>
    </fieldset>
    <fieldset
      class="mt-2 fieldsetIF pb-5"
      *ngIf="formulario.value.chekbox4CasaDescanso"
    >
      <h5 class="mb-4 ml-4">
        Somente para quem deseja disponibiliar casa de descanso
      </h5>

      <div class="col imgFilePrincipal d-flex">
        <input
          type="file"
          [ngClass]="aplicaCss('imgFileCasaDescansoPrincipal')"
          name="imgFileCasaDescansoPrincipal"
          (change)="onFileSelect($event, 'imgFileCasaDescansoPrincipal')"
        />

        <div class="labelTypeFile">
          <p>
            Aqui, adicione a imagem principal que deja mostrar sobre a casa, é
            possivel adicionar somente uma imagem principal.
          </p>
        </div>
      </div>
      <small
      *ngIf="hasArchive !=null && hasArchive && formulario.controls.imgFileCasaDescansoPrincipal.invalid"

        class="text-formInvalid ml-1"
      >
        O ítem selecionado não é uma imagem, verifique e tente novamente.
      </small>
      <hr />
      <div class="col imgFilePrincipal d-flex">
        <input
          type="file"
          multiple
          [ngClass]="aplicaCss('imgsCasaDescansoFile')"
          name="imgsCasaDescansoFile"
          (change)="onFileSelect($event, 'imgsCasaDescansoFile')"
        />
        <div class="labelTypeFile">
          <p>
            Aqui, adicione até 10 imagens da casa que deseja disponibilizar.
          </p>
        </div>
      </div>
      <small
      *ngIf="hasArchive !=null && hasArchive && formulario.controls.imgsCasaDescansoFile.invalid"

        class="text-formInvalid ml-1"
      >
        Algum ítem selecionado não é uma imagem, verifique e tente novamente.
      </small>
    </fieldset>
    <hr />

    <div class="d-flex justify-content-center mt-4">
      <button
        type="submit"
        class="btn btn-success btn-lg pr-5 pl-5"
        *ngIf="Voluntary._id"
      >
        Salvar dados Alterados
      </button>
      <button
        type="submit"
        class="btn btn-success btn-lg pr-5 pl-5"
        *ngIf="!Voluntary._id"
      >
        Cadastrar Voluntário
      </button>
    </div>
  </form>
</div>
